<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Música - Neogeo Portafolio</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/4.0.1/wavesurfer.min.js"></script>
    <style>
        /* Estilo para el contenedor de música */
        .music-container {
            position: relative;
            width: 100%;
            height: 500px;
        }

        /* Estilo para el modelo 3D (GLB) */
        model-viewer {
            width: 100%;
            height: 100%;
            z-index: 5;
            position: relative;
        }

        /* Reproductor de música nativo */
        .music-player {
            position: absolute;
            top: 200px; /* Ajusta según sea necesario */
            left: 50%;
            transform: translateX(-50%);
            z-index: 10; /* Más alto que el modelo 3D */
            width: 200px; /* Ajusta el tamaño según sea necesario */
        }

        /* Forma de onda detrás del modelo 3D */
        #waveform {
            width: 80%;
            height: 150px;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1; /* Más bajo que el modelo 3D */
        }

        /* Estilos adicionales para la imagen de la mano */
        .hand-image {
            position: absolute;
            left: 10px;
            top: 350px;
            width: 100px;
            cursor: pointer;
            z-index: 20; /* Asegúrate de que esté encima de todos los elementos */
        }

        /* Estilo para el anuncio */
        .announcement-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            text-align: center;
            padding: 10px;
            font-size: 16px;
            z-index: 100;
            animation: randomColors 5s linear infinite;
        }

        .announcement-banner marquee {
            font-weight: bold;
        }

        @keyframes randomColors {
            0% { background-color: #FF5733; }
            20% { background-color: #FFBD33; }
            40% { background-color: #DBFF33; }
            60% { background-color: #75FF33; }
            80% { background-color: #33FF57; }
            100% { background-color: #33FFBD; }
        }
    </style>
</head>
<body>
    <!-- Cartel de anuncio -->
    <div class="announcement-banner">
        <marquee behavior="scroll" direction="left">¡Interactúa con el modelo 3D y controla el reproductor de música!</marquee>
    </div>

    <header>
        <div class="nav-toggle" id="nav-toggle">
            <span>☰</span>
        </div>
        <nav class="nav-content" id="nav-content">
            <a href="index.html">Inicio</a>
            <a href="projects.html">Proyectos</a>
            <a href="media.html">Medios</a>
            <a href="music.html">Música</a>
            <a href="visuals.html">Visuales</a>
        </nav>
    </header>

    <main>
        <section class="music-container">
            <!-- Reproductor de música nativo -->
            <div class="music-player">
                <audio id="audio-player" controls>
                    <source src="micancion.mp3" type="audio/mpeg">
                    Tu navegador no soporta el reproductor de audio.
                </audio>
            </div>

            <!-- Modelo 3D (GLB) -->
            <model-viewer 
                src="cdj.glb" 
                alt="DJ Mixer" 
                camera-controls 
                auto-rotate 
                ar>
            </model-viewer>

            <!-- Forma de onda detrás del modelo 3D -->
            <div id="waveform"></div>

            <!-- Imagen de la mano -->
            <img src="manoizq.png" class="hand-image" id="hand-image" alt="Mano Izquierda">
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Neogeo - Todos los derechos reservados</p>
    </footer>

    <script>
        document.getElementById('nav-toggle').addEventListener('click', function() {
            const navContent = document.getElementById('nav-content');
            navContent.classList.toggle('open');
        });

        // Inicializar Wavesurfer.js
        const audioElement = document.getElementById('audio-player');
        const waveformContainer = document.getElementById('waveform');
        const wavesurfer = WaveSurfer.create({
            container: waveformContainer,
            waveColor: 'rgba(255, 87, 51, 1)',
            progressColor: 'rgba(255, 255, 255, 1)',
            height: 128
        });

        // Cargar el archivo de audio
        wavesurfer.load('micancion.mp3');

        // Sincronizar el reproductor de audio con Wavesurfer
        audioElement.addEventListener('play', () => wavesurfer.play());
        audioElement.addEventListener('pause', () => wavesurfer.pause());
        audioElement.addEventListener('timeupdate', () => {
            wavesurfer.setCurrentTime(audioElement.currentTime);
        });
        wavesurfer.on('ready', () => {
            // Sincroniza el tiempo al iniciar
            audioElement.currentTime = wavesurfer.getCurrentTime();
        });
    </script>
</body>
</html>
